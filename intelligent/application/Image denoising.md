# Image Denoising

[TOC]

## Image Haze Removal

- 论文: Single Image Haze Removal Using Dark Channel Prior

先验的暗通道存在性(经验定理)
统计观察发现, 无雾图像的非天空局部区域的像素中, 至少存在一个颜色通道的亮度值接近于0.
$$
J_{dark}(x) = \min_{y\in \Omega(x)} (\min_{c\in \{R,G,B\}} J_c(y)) \to 0
$$
暗通道存在的原因:
* 汽车、建筑物和城市中玻璃窗户的阴影, 或者是树叶、树与岩石等自然景观的投影.
* 色彩鲜艳的物体或表面, 在RGB的三个通道中有些通道的值很低(如, 绿色的草地/树/植物, 红色或黄色的花朵/叶子, 或者蓝色的水面).
* 颜色较暗的物体或者表面, 例如灰暗色的树干和石头. 

### Process

* 估计大气光亮度 $A$
  当天气是阴天的时候, 太阳光通常都是被忽略的, 在这种情况下大气光是景观中唯一的可照亮来源. 如果有一个图像中, 存在一个很远很远的无限远的距离的像素存在, (这个时候, 此像素的透射率几乎为0). 这个图像中最亮最亮的值所在的像素可以被看做是雾遮盖的程度最大也是其值可以看做是几乎等同于A.
* 估计透射率 $t$
$$
t = 1 - \min_{y\in \Omega(x)} ( \min_{c\in \{R,G,B\}} \frac{I_c(y)}{A_c} )
$$
* 透射率柔化 $t$, 导向滤波
* 恢复去雾图像 $J$
$$
J(x) = \frac{I(x) - A}{t(x)} + A
$$